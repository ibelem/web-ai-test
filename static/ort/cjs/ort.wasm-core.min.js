/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var Ke=Object.defineProperty;var Xr=Object.getOwnPropertyDescriptor;var Jr=Object.getOwnPropertyNames;var Kr=Object.prototype.hasOwnProperty;var C=(t,e)=>()=>(t&&(e=t(t=0)),e);var Zr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ae=(t,e)=>{for(var r in e)Ke(t,r,{get:e[r],enumerable:!0})},Qr=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Jr(e))!Kr.call(t,o)&&o!==r&&Ke(t,o,{get:()=>e[o],enumerable:!(a=Xr(e,o))||a.enumerable});return t};var De=t=>Qr(Ke({},"__esModule",{value:!0}),t);var Ue,de,be,Re,Le=C(()=>{"use strict";Ue=new Map,de=[],be=(t,e,r)=>{if(e&&typeof e.init=="function"&&typeof e.createInferenceSessionHandler=="function"){let a=Ue.get(t);if(a===void 0)Ue.set(t,{backend:e,priority:r});else{if(a.priority>r)return;if(a.priority===r&&a.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${r}`)}if(r>=0){let o=de.indexOf(t);o!==-1&&de.splice(o,1);for(let l=0;l<de.length;l++)if(Ue.get(de[l]).priority<=r){de.splice(l,0,t);return}de.push(t)}return}throw new TypeError("not a valid backend")},Re=async t=>{let e=t.length===0?de:t,r=[];for(let a of e){let o=Ue.get(a);if(o){if(o.initialized)return o.backend;if(o.aborted)continue;let l=!!o.initPromise;try{return l||(o.initPromise=o.backend.init(a)),await o.initPromise,o.initialized=!0,o.backend}catch(u){l||r.push({name:a,err:u}),o.aborted=!0}finally{delete o.initPromise}}}throw new Error(`no available backend found. ERR: ${r.map(a=>`[${a.name}] ${a.err}`).join(", ")}`)}});var _t=C(()=>{"use strict";Le()});var Dt,Ut=C(()=>{"use strict";Dt="1.18.0"});var Rt,pe,Ze=C(()=>{"use strict";Ut();Rt="warning",pe={wasm:{},webgl:{},webgpu:{},versions:{common:Dt},set logLevel(t){if(t!==void 0){if(typeof t!="string"||["verbose","info","warning","error","fatal"].indexOf(t)===-1)throw new Error(`Unsupported logging level: ${t}`);Rt=t}},get logLevel(){return Rt}};Object.defineProperty(pe,"logLevel",{enumerable:!0})});var U,Lt=C(()=>{"use strict";Ze();U=pe});var Mt,Ft,kt=C(()=>{"use strict";Mt=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=t.dims[3],r.height=t.dims[2];let a=r.getContext("2d");if(a!=null){let o,l;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],l=t.dims[3]):(o=t.dims[3],l=t.dims[2]);let u=e?.format!==void 0?e.format:"RGB",f=e?.norm,p,d;f===void 0||f.mean===void 0?p=[255,255,255,255]:typeof f.mean=="number"?p=[f.mean,f.mean,f.mean,f.mean]:(p=[f.mean[0],f.mean[1],f.mean[2],0],f.mean[3]!==void 0&&(p[3]=f.mean[3])),f===void 0||f.bias===void 0?d=[0,0,0,0]:typeof f.bias=="number"?d=[f.bias,f.bias,f.bias,f.bias]:(d=[f.bias[0],f.bias[1],f.bias[2],0],f.bias[3]!==void 0&&(d[3]=f.bias[3]));let y=l*o,w=0,h=y,b=y*2,O=-1;u==="RGBA"?(w=0,h=y,b=y*2,O=y*3):u==="RGB"?(w=0,h=y,b=y*2):u==="RBG"&&(w=0,b=y,h=y*2);for(let v=0;v<l;v++)for(let A=0;A<o;A++){let _=(t.data[w++]-d[0])*p[0],I=(t.data[h++]-d[1])*p[1],B=(t.data[b++]-d[2])*p[2],W=O===-1?255:(t.data[O++]-d[3])*p[3];a.fillStyle="rgba("+_+","+I+","+B+","+W+")",a.fillRect(A,v,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Ft=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),a;if(r!=null){let o,l,u;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],l=t.dims[1],u=t.dims[3]):(o=t.dims[3],l=t.dims[2],u=t.dims[1]);let f=e!==void 0&&e.format!==void 0?e.format:"RGB",p=e?.norm,d,y;p===void 0||p.mean===void 0?d=[255,255,255,255]:typeof p.mean=="number"?d=[p.mean,p.mean,p.mean,p.mean]:(d=[p.mean[0],p.mean[1],p.mean[2],255],p.mean[3]!==void 0&&(d[3]=p.mean[3])),p===void 0||p.bias===void 0?y=[0,0,0,0]:typeof p.bias=="number"?y=[p.bias,p.bias,p.bias,p.bias]:(y=[p.bias[0],p.bias[1],p.bias[2],0],p.bias[3]!==void 0&&(y[3]=p.bias[3]));let w=l*o;if(e!==void 0&&(e.format!==void 0&&u===4&&e.format!=="RGBA"||u===3&&e.format!=="RGB"&&e.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let h=4,b=0,O=1,v=2,A=3,_=0,I=w,B=w*2,W=-1;f==="RGBA"?(_=0,I=w,B=w*2,W=w*3):f==="RGB"?(_=0,I=w,B=w*2):f==="RBG"&&(_=0,B=w,I=w*2),a=r.createImageData(o,l);for(let k=0;k<l*o;b+=h,O+=h,v+=h,A+=h,k++)a.data[b]=(t.data[_++]-y[0])*d[0],a.data[O]=(t.data[I++]-y[1])*d[1],a.data[v]=(t.data[B++]-y[2])*d[2],a.data[A]=W===-1?255:(t.data[W++]-y[3])*d[3]}else throw new Error("Can not access image data");return a}});var Qe,Nt,Wt,Gt,Ht,$t=C(()=>{"use strict";Me();Qe=(t,e)=>{if(t===void 0)throw new Error("Image buffer must be defined");if(e.height===void 0||e.width===void 0)throw new Error("Image height and width must be defined");if(e.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:a}=e,o=e.norm??{mean:255,bias:0},l,u;typeof o.mean=="number"?l=[o.mean,o.mean,o.mean,o.mean]:l=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?u=[o.bias,o.bias,o.bias,o.bias]:u=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];let f=e.format!==void 0?e.format:"RGBA",p=e.tensorFormat!==void 0&&e.tensorFormat!==void 0?e.tensorFormat:"RGB",d=r*a,y=p==="RGBA"?new Float32Array(d*4):new Float32Array(d*3),w=4,h=0,b=1,O=2,v=3,A=0,_=d,I=d*2,B=-1;f==="RGB"&&(w=3,h=0,b=1,O=2,v=-1),p==="RGBA"?B=d*3:p==="RBG"?(A=0,I=d,_=d*2):p==="BGR"&&(I=0,_=d,A=d*2);for(let k=0;k<d;k++,h+=w,O+=w,b+=w,v+=w)y[A++]=(t[h]+u[0])/l[0],y[_++]=(t[b]+u[1])/l[1],y[I++]=(t[O]+u[2])/l[2],B!==-1&&v!==-1&&(y[B++]=(t[v]+u[3])/l[3]);return p==="RGBA"?new Y("float32",y,[1,4,r,a]):new Y("float32",y,[1,3,r,a])},Nt=async(t,e)=>{let r=typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement,a=typeof ImageData<"u"&&t instanceof ImageData,o=typeof ImageBitmap<"u"&&t instanceof ImageBitmap,l=typeof t=="string",u,f=e??{},p=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},d=y=>y instanceof HTMLCanvasElement||y instanceof OffscreenCanvas?y.getContext("2d"):null;if(r){let y=p();y.width=t.width,y.height=t.height;let w=d(y);if(w!=null){let h=t.height,b=t.width;if(e!==void 0&&e.resizedHeight!==void 0&&e.resizedWidth!==void 0&&(h=e.resizedHeight,b=e.resizedWidth),e!==void 0){if(f=e,e.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");f.tensorFormat="RGBA",f.height=h,f.width=b}else f.tensorFormat="RGBA",f.height=h,f.width=b;w.drawImage(t,0,0),u=w.getImageData(0,0,b,h).data}else throw new Error("Can not access image data")}else if(a){let y,w;if(e!==void 0&&e.resizedWidth!==void 0&&e.resizedHeight!==void 0?(y=e.resizedHeight,w=e.resizedWidth):(y=t.height,w=t.width),e!==void 0&&(f=e),f.format="RGBA",f.height=y,f.width=w,e!==void 0){let h=p();h.width=w,h.height=y;let b=d(h);if(b!=null)b.putImageData(t,0,0),u=b.getImageData(0,0,w,y).data;else throw new Error("Can not access image data")}else u=t.data}else if(o){if(e===void 0)throw new Error("Please provide image config with format for Imagebitmap");let y=p();y.width=t.width,y.height=t.height;let w=d(y);if(w!=null){let h=t.height,b=t.width;return w.drawImage(t,0,0,b,h),u=w.getImageData(0,0,b,h).data,f.height=h,f.width=b,Qe(u,f)}else throw new Error("Can not access image data")}else{if(l)return new Promise((y,w)=>{let h=p(),b=d(h);if(!t||!b)return w();let O=new Image;O.crossOrigin="Anonymous",O.src=t,O.onload=()=>{h.width=O.width,h.height=O.height,b.drawImage(O,0,0,h.width,h.height);let v=b.getImageData(0,0,h.width,h.height);f.height=h.height,f.width=h.width,y(Qe(v.data,f))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(u!==void 0)return Qe(u,f);throw new Error("Input data provided is not supported - aborted tensor creation")},Wt=(t,e)=>{let{width:r,height:a,download:o,dispose:l}=e,u=[1,a,r,4];return new Y({location:"texture",type:"float32",texture:t,dims:u,download:o,dispose:l})},Gt=(t,e)=>{let{dataType:r,dims:a,download:o,dispose:l}=e;return new Y({location:"gpu-buffer",type:r??"float32",gpuBuffer:t,dims:a,download:o,dispose:l})},Ht=(t,e,r)=>new Y({location:"cpu-pinned",type:t,data:e,dims:r??[e.length]})});var xe,Fe,zt,jt,Yt=C(()=>{"use strict";xe=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Fe=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),zt=!1,jt=()=>{if(!zt){zt=!0;let t=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",e=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";t&&(xe.set("int64",BigInt64Array),Fe.set(BigInt64Array,"int64")),e&&(xe.set("uint64",BigUint64Array),Fe.set(BigUint64Array,"uint64"))}}});var qt,Vt,Xt=C(()=>{"use strict";Me();qt=t=>{let e=1;for(let r=0;r<t.length;r++){let a=t[r];if(typeof a!="number"||!Number.isSafeInteger(a))throw new TypeError(`dims[${r}] must be an integer, got: ${a}`);if(a<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${a}`);e*=a}return e},Vt=(t,e)=>{switch(t.location){case"cpu":return new Y(t.type,t.data,e);case"cpu-pinned":return new Y({location:"cpu-pinned",data:t.data,type:t.type,dims:e});case"texture":return new Y({location:"texture",texture:t.texture,type:t.type,dims:e});case"gpu-buffer":return new Y({location:"gpu-buffer",gpuBuffer:t.gpuBuffer,type:t.type,dims:e});default:throw new Error(`tensorReshape: tensor location ${t.location} is not supported`)}}});var Y,Me=C(()=>{"use strict";kt();$t();Yt();Xt();Y=class{constructor(e,r,a){jt();let o,l;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,o=e.type,l=e.dims,e.location){case"cpu-pinned":{let f=xe.get(o);if(!f)throw new TypeError(`unsupported type "${o}" to create tensor from pinned buffer`);if(!(e.data instanceof f))throw new TypeError(`buffer should be of type ${f.name}`);this.cpuData=e.data;break}case"texture":{if(o!=="float32")throw new TypeError(`unsupported type "${o}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="bool")throw new TypeError(`unsupported type "${o}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let f,p;if(typeof e=="string")if(o=e,p=a,e==="string"){if(!Array.isArray(r))throw new TypeError("A string tensor's data must be a string array.");f=r}else{let d=xe.get(e);if(d===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(r)){if(e==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");e==="uint64"||e==="int64"?f=d.from(r,BigInt):f=d.from(r)}else if(r instanceof d)f=r;else throw new TypeError(`A ${o} tensor's data must be type of ${d}`)}else if(p=r,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let d=typeof e[0];if(d==="string")o="string",f=e;else if(d==="boolean")o="bool",f=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${d}.`)}else{let d=Fe.get(e.constructor);if(d===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);o=d,f=e}if(p===void 0)p=[f.length];else if(!Array.isArray(p))throw new TypeError("A tensor's dims must be a number array");l=p,this.cpuData=f,this.dataLocation="cpu"}let u=qt(l);if(this.cpuData&&u!==this.cpuData.length)throw new Error(`Tensor's size(${u}) does not match data length(${this.cpuData.length}).`);this.type=o,this.dims=l,this.size=u}static async fromImage(e,r){return Nt(e,r)}static fromTexture(e,r){return Wt(e,r)}static fromGpuBuffer(e,r){return Gt(e,r)}static fromPinnedBuffer(e,r,a){return Ht(e,r,a)}toDataURL(e){return Mt(this,e)}toImageData(e){return Ft(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let r=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=r,e&&this.disposer&&(this.disposer(),this.disposer=void 0),r}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return Vt(this,e)}}});var H,ke=C(()=>{"use strict";Me();H=Y});var et,Jt,oe,se,tt=C(()=>{"use strict";Ze();et=(t,e)=>{pe.wasm.trace&&console.timeStamp(`${t}::ORT::${e}`)},Jt=(t,e)=>{let r=new Error().stack?.split(/\r\n|\r|\n/g)||[],a=!1;for(let o=0;o<r.length;o++){if(a&&!r[o].includes("TRACE_FUNC")){let l=`FUNC_${t}::${r[o].trim().split(" ")[1]}`;e&&(l+=`::${e}`),et("CPU",l);return}r[o].includes("TRACE_FUNC")&&(a=!0)}},oe=t=>{pe.wasm.trace&&Jt("BEGIN",t)},se=t=>{pe.wasm.trace&&Jt("END",t)}});var Ne,Kt=C(()=>{"use strict";Le();ke();tt();Ne=class t{constructor(e){this.handler=e}async run(e,r,a){oe();let o={},l={};if(typeof e!="object"||e===null||e instanceof H||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof H)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let d of r){if(typeof d!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(d)===-1)throw new RangeError(`'fetches' contains invalid output name: ${d}.`);o[d]=null}if(typeof a=="object"&&a!==null)l=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{let d=!1,y=Object.getOwnPropertyNames(r);for(let w of this.outputNames)if(y.indexOf(w)!==-1){let h=r[w];(h===null||h instanceof H)&&(d=!0,u=!1,o[w]=h)}if(d){if(typeof a=="object"&&a!==null)l=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else l=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let d of this.inputNames)if(typeof e[d]>"u")throw new Error(`input '${d}' is missing in 'feeds'.`);if(u)for(let d of this.outputNames)o[d]=null;let f=await this.handler.run(e,o,l),p={};for(let d in f)if(Object.hasOwnProperty.call(f,d)){let y=f[d];y instanceof H?p[d]=y:p[d]=new H(y.type,y.data,y.dims)}return se(),p}async release(){return this.handler.dispose()}static async create(e,r,a,o){oe();let l,u={};if(typeof e=="string"){if(l=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(l=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){let w=e,h=0,b=e.byteLength;if(typeof r=="object"&&r!==null)u=r;else if(typeof r=="number"){if(h=r,!Number.isSafeInteger(h))throw new RangeError("'byteOffset' must be an integer.");if(h<0||h>=w.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${w.byteLength}).`);if(b=e.byteLength-h,typeof a=="number"){if(b=a,!Number.isSafeInteger(b))throw new RangeError("'byteLength' must be an integer.");if(b<=0||h+b>w.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${w.byteLength-h}].`);if(typeof o=="object"&&o!==null)u=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof a<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");l=new Uint8Array(w,h,b)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let p=(u.executionProviders||[]).map(w=>typeof w=="string"?w:w.name),y=await(await Re(p)).createInferenceSessionHandler(l,u);return se(),new t(y)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var Zt,Qt=C(()=>{"use strict";Kt();Zt=Ne});var er=C(()=>{"use strict"});var en,We,tr=C(()=>{"use strict";Le();ke();en="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",We=class t{constructor(e,r,a){this.handler=e,this.hasOptimizerModel=r,this.hasEvalModel=a}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(e,r){let a=e.evalModel||"",o=e.optimizerModel||"",l=r||{},f=(l.executionProviders||[]).map(d=>typeof d=="string"?d:d.name),p=await Re(f);if(p.createTrainingSessionHandler){let d=await p.createTrainingSessionHandler(e.checkpointState,e.trainModel,a,o,l);return new t(d,!!e.optimizerModel,!!e.evalModel)}else throw new Error(en)}typeNarrowingForRunStep(e,r,a,o,l){let u={},f={};if(typeof a!="object"||a===null||a instanceof H||Array.isArray(a))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let p=!0;if(typeof o=="object"){if(o===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(o instanceof H)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(o)){if(o.length===0)throw new TypeError("'fetches' cannot be an empty array.");p=!1;for(let d of o){if(typeof d!="string")throw new TypeError("'fetches' must be a string array or an object.");if(r.indexOf(d)===-1)throw new RangeError(`'fetches' contains invalid output name: ${d}.`);u[d]=null}if(typeof l=="object"&&l!==null)f=l;else if(typeof l<"u")throw new TypeError("'options' must be an object.")}else{let d=!1,y=Object.getOwnPropertyNames(o);for(let w of r)if(y.indexOf(w)!==-1){let h=o[w];(h===null||h instanceof H)&&(d=!0,p=!1,u[w]=h)}if(d){if(typeof l=="object"&&l!==null)f=l;else if(typeof l<"u")throw new TypeError("'options' must be an object.")}else f=o}}else if(typeof o<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let d of e)if(typeof a[d]>"u")throw new Error(`input '${d}' is missing in 'feeds'.`);if(p)for(let d of r)u[d]=null;return[u,f]}convertHandlerReturnTypeToMapOfTensors(e){let r={};for(let a in e)if(Object.hasOwnProperty.call(e,a)){let o=e[a];o instanceof H?r[a]=o:r[a]=new H(o.type,o.data,o.dims)}return r}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(e,r,a){let[o,l]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,r,a),u=await this.handler.runTrainStep(e,o,l);return this.convertHandlerReturnTypeToMapOfTensors(u)}async runOptimizerStep(e){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(e||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(e,r,a){if(this.hasEvalModel){let[o,l]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,r,a),u=await this.handler.runEvalStep(e,o,l);return this.convertHandlerReturnTypeToMapOfTensors(u)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(e=!0){return this.handler.getParametersSize(e)}async loadParametersBuffer(e,r=!0){let a=await this.getParametersSize(r);if(e.length!==4*a)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,r)}async getContiguousParameters(e=!0){return this.handler.getContiguousParameters(e)}async release(){return this.handler.dispose()}}});var rr,nr=C(()=>{"use strict";tr();rr=We});var rt={};Ae(rt,{InferenceSession:()=>Zt,TRACE:()=>et,TRACE_FUNC_BEGIN:()=>oe,TRACE_FUNC_END:()=>se,Tensor:()=>H,TrainingSession:()=>rr,env:()=>U,registerBackend:()=>be});var me=C(()=>{"use strict";_t();Lt();Qt();ke();tt();er();nr()});var ar={};Ae(ar,{createReadStream:()=>sr,readFile:()=>tn,readFileSync:()=>rn});var tn,rn,sr,ir=C(()=>{tn=void 0,rn=void 0,sr=void 0});var ur={};Ae(ur,{join:()=>nn});var nn,fr=C(()=>{nn=void 0});var dr=Zr((cr,nt)=>{"use strict";var lr=(()=>{var t=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(t=t||__filename),function(e={}){var r=e,a,o;r.ready=new Promise((n,s)=>{a=n,o=s});var l=Object.assign({},r),u="./this.program",f=typeof window=="object",p=typeof importScripts=="function",d=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",y="",w,h,b;if(d){var O=(ir(),De(ar)),v=(fr(),De(ur));y=p?v.dirname(y)+"/":__dirname+"/",w=(n,s)=>(n=ie(n)?new URL(n):v.normalize(n),O.readFileSync(n,s?void 0:"utf8")),b=n=>(n=w(n,!0),n.buffer||(n=new Uint8Array(n)),n),h=(n,s,i,m=!0)=>{n=ie(n)?new URL(n):v.normalize(n),O.readFile(n,m?void 0:"utf8",(g,T)=>{g?i(g):s(m?T.buffer:T)})},!r.thisProgram&&1<process.argv.length&&(u=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),r.inspect=()=>"[Emscripten Module object]"}else(f||p)&&(p?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),t&&(y=t),y.indexOf("blob:")!==0?y=y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):y="",w=n=>{var s=new XMLHttpRequest;return s.open("GET",n,!1),s.send(null),s.responseText},p&&(b=n=>{var s=new XMLHttpRequest;return s.open("GET",n,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}),h=(n,s,i)=>{var m=new XMLHttpRequest;m.open("GET",n,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?s(m.response):i()},m.onerror=i,m.send(null)});var A=console.log.bind(console),_=console.error.bind(console);Object.assign(r,l),l=null,typeof WebAssembly!="object"&&P("no native wasm support detected");var I,B=!1,W,k,E,N,he;function Te(){var n=I.buffer;r.HEAP8=W=new Int8Array(n),r.HEAP16=new Int16Array(n),r.HEAPU8=k=new Uint8Array(n),r.HEAPU16=new Uint16Array(n),r.HEAP32=E=new Int32Array(n),r.HEAPU32=N=new Uint32Array(n),r.HEAPF32=new Float32Array(n),r.HEAPF64=he=new Float64Array(n)}var X=[],ve=[],Pe=[],ae=0,ye=null,Z=null;function P(n){throw n="Aborted("+n+")",_(n),B=!0,n=new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info."),o(n),n}var te=n=>n.startsWith("data:application/octet-stream;base64,"),ie=n=>n.startsWith("file://"),J;if(J="ort-wasm.wasm",!te(J)){var ue=J;J=r.locateFile?r.locateFile(ue,y):y+ue}function z(n){if(b)return b(n);throw"both async and sync fetching of the wasm failed"}function Q(n){if(f||p){if(typeof fetch=="function"&&!ie(n))return fetch(n,{credentials:"same-origin"}).then(s=>{if(!s.ok)throw"failed to load wasm binary file at '"+n+"'";return s.arrayBuffer()}).catch(()=>z(n));if(h)return new Promise((s,i)=>{h(n,m=>s(new Uint8Array(m)),i)})}return Promise.resolve().then(()=>z(n))}function Ye(n,s,i){return Q(n).then(m=>WebAssembly.instantiate(m,s)).then(m=>m).then(i,m=>{_(`failed to asynchronously prepare wasm: ${m}`),P(m)})}function we(n,s){var i=J;return typeof WebAssembly.instantiateStreaming!="function"||te(i)||ie(i)||d||typeof fetch!="function"?Ye(i,n,s):fetch(i,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,n).then(s,function(g){return _(`wasm streaming compile failed: ${g}`),_("falling back to ArrayBuffer instantiation"),Ye(i,n,s)}))}var ee,Ce={919824:(n,s,i,m)=>{if(typeof r>"u"||!r.za)return 1;if(n=G(n>>>0),n.startsWith("./")&&(n=n.substring(2)),n=r.za.get(n),!n)return 2;if(s>>>=0,i>>>=0,s+i>n.byteLength)return 3;try{return k.set(n.subarray(s,s+i),m>>>0>>>0),0}catch{return 4}}};function qe(n){this.xa=n-24,this.Ha=function(s){N[this.xa+4>>>2>>>0]=s},this.Ga=function(s){N[this.xa+8>>>2>>>0]=s},this.Aa=function(s,i){this.Fa(),this.Ha(s),this.Ga(i)},this.Fa=function(){N[this.xa+16>>>2>>>0]=0}}var re=0,fe=0,Se=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,$=(n,s,i)=>{s>>>=0;var m=s+i;for(i=s;n[i]&&!(i>=m);)++i;if(16<i-s&&n.buffer&&Se)return Se.decode(n.subarray(s,i));for(m="";s<i;){var g=n[s++];if(g&128){var T=n[s++]&63;if((g&224)==192)m+=String.fromCharCode((g&31)<<6|T);else{var x=n[s++]&63;g=(g&240)==224?(g&15)<<12|T<<6|x:(g&7)<<18|T<<12|x<<6|n[s++]&63,65536>g?m+=String.fromCharCode(g):(g-=65536,m+=String.fromCharCode(55296|g>>10,56320|g&1023))}}else m+=String.fromCharCode(g)}return m},G=(n,s)=>(n>>>=0)?$(k,n,s):"",le=n=>{for(var s=0,i=0;i<n.length;++i){var m=n.charCodeAt(i);127>=m?s++:2047>=m?s+=2:55296<=m&&57343>=m?(s+=4,++i):s+=3}return s},ge=(n,s,i,m)=>{if(i>>>=0,!(0<m))return 0;var g=i;m=i+m-1;for(var T=0;T<n.length;++T){var x=n.charCodeAt(T);if(55296<=x&&57343>=x){var j=n.charCodeAt(++T);x=65536+((x&1023)<<10)|j&1023}if(127>=x){if(i>=m)break;s[i++>>>0]=x}else{if(2047>=x){if(i+1>=m)break;s[i++>>>0]=192|x>>6}else{if(65535>=x){if(i+2>=m)break;s[i++>>>0]=224|x>>12}else{if(i+3>=m)break;s[i++>>>0]=240|x>>18,s[i++>>>0]=128|x>>12&63}s[i++>>>0]=128|x>>6&63}s[i++>>>0]=128|x&63}}return s[i>>>0]=0,i-g},ne=n=>n%4===0&&(n%100!==0||n%400===0),mt=[0,31,60,91,121,152,182,213,244,274,305,335],ht=[0,31,59,90,120,151,181,212,243,273,304,334],yt=n=>{var s=le(n)+1,i=Tt(s);return i&&ge(n,k,i,s),i},Ve=[],Xe={},wt=()=>{if(!Je){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"},s;for(s in Xe)Xe[s]===void 0?delete n[s]:n[s]=Xe[s];var i=[];for(s in n)i.push(`${s}=${n[s]}`);Je=i}return Je},Je,jr=[null,[],[]],gt=[31,29,31,30,31,30,31,31,30,31,30,31],bt=[31,28,31,30,31,30,31,31,30,31,30,31];function Yr(n){var s=Array(le(n)+1);return ge(n,s,0,s.length),s}function Et(n,s,i,m){function g(c,D,M){for(c=typeof c=="number"?c.toString():c||"";c.length<D;)c=M[0]+c;return c}function T(c,D){return g(c,D,"0")}function x(c,D){function M(Ct){return 0>Ct?-1:0<Ct?1:0}var ce;return(ce=M(c.getFullYear()-D.getFullYear()))===0&&(ce=M(c.getMonth()-D.getMonth()))===0&&(ce=M(c.getDate()-D.getDate())),ce}function j(c){switch(c.getDay()){case 0:return new Date(c.getFullYear()-1,11,29);case 1:return c;case 2:return new Date(c.getFullYear(),0,3);case 3:return new Date(c.getFullYear(),0,2);case 4:return new Date(c.getFullYear(),0,1);case 5:return new Date(c.getFullYear()-1,11,31);case 6:return new Date(c.getFullYear()-1,11,30)}}function K(c){var D=c.ta;for(c=new Date(new Date(c.ua+1900,0,1).getTime());0<D;){var M=c.getMonth(),ce=(ne(c.getFullYear())?gt:bt)[M];if(D>ce-c.getDate())D-=ce-c.getDate()+1,c.setDate(1),11>M?c.setMonth(M+1):(c.setMonth(0),c.setFullYear(c.getFullYear()+1));else{c.setDate(c.getDate()+D);break}}return M=new Date(c.getFullYear()+1,0,4),D=j(new Date(c.getFullYear(),0,4)),M=j(M),0>=x(D,c)?0>=x(M,c)?c.getFullYear()+1:c.getFullYear():c.getFullYear()-1}n>>>=0,s>>>=0,i>>>=0,m>>>=0;var q=N[m+40>>>2>>>0];m={Da:E[m>>>2>>>0],Ca:E[m+4>>>2>>>0],va:E[m+8>>>2>>>0],ya:E[m+12>>>2>>>0],wa:E[m+16>>>2>>>0],ua:E[m+20>>>2>>>0],oa:E[m+24>>>2>>>0],ta:E[m+28>>>2>>>0],Ia:E[m+32>>>2>>>0],Ba:E[m+36>>>2>>>0],Ea:q?G(q):""},i=G(i),q={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var V in q)i=i.replace(new RegExp(V,"g"),q[V]);var Bt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Pt="January February March April May June July August September October November December".split(" ");q={"%a":c=>Bt[c.oa].substring(0,3),"%A":c=>Bt[c.oa],"%b":c=>Pt[c.wa].substring(0,3),"%B":c=>Pt[c.wa],"%C":c=>T((c.ua+1900)/100|0,2),"%d":c=>T(c.ya,2),"%e":c=>g(c.ya,2," "),"%g":c=>K(c).toString().substring(2),"%G":c=>K(c),"%H":c=>T(c.va,2),"%I":c=>(c=c.va,c==0?c=12:12<c&&(c-=12),T(c,2)),"%j":c=>{for(var D=0,M=0;M<=c.wa-1;D+=(ne(c.ua+1900)?gt:bt)[M++]);return T(c.ya+D,3)},"%m":c=>T(c.wa+1,2),"%M":c=>T(c.Ca,2),"%n":()=>`
`,"%p":c=>0<=c.va&&12>c.va?"AM":"PM","%S":c=>T(c.Da,2),"%t":()=>"	","%u":c=>c.oa||7,"%U":c=>T(Math.floor((c.ta+7-c.oa)/7),2),"%V":c=>{var D=Math.floor((c.ta+7-(c.oa+6)%7)/7);if(2>=(c.oa+371-c.ta-2)%7&&D++,D)D==53&&(M=(c.oa+371-c.ta)%7,M==4||M==3&&ne(c.ua)||(D=1));else{D=52;var M=(c.oa+7-c.ta-1)%7;(M==4||M==5&&ne(c.ua%400-1))&&D++}return T(D,2)},"%w":c=>c.oa,"%W":c=>T(Math.floor((c.ta+7-(c.oa+6)%7)/7),2),"%y":c=>(c.ua+1900).toString().substring(2),"%Y":c=>c.ua+1900,"%z":c=>{c=c.Ba;var D=0<=c;return c=Math.abs(c)/60,(D?"+":"-")+("0000"+(c/60*100+c%60)).slice(-4)},"%Z":c=>c.Ea,"%%":()=>"%"},i=i.replace(/%%/g,"\0\0");for(V in q)i.includes(V)&&(i=i.replace(new RegExp(V,"g"),q[V](m)));return i=i.replace(/\0\0/g,"%"),V=Yr(i),V.length>s?0:(W.set(V,n>>>0),V.length-1)}var qr={a:function(n,s,i){throw n>>>=0,new qe(n).Aa(s>>>0,i>>>0),re=n,fe++,re},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(n,s,i){n=s+2097152>>>0<4194305-!!n?(n>>>0)+4294967296*s:NaN,i>>>=0,n=new Date(1e3*n),E[i>>>2>>>0]=n.getUTCSeconds(),E[i+4>>>2>>>0]=n.getUTCMinutes(),E[i+8>>>2>>>0]=n.getUTCHours(),E[i+12>>>2>>>0]=n.getUTCDate(),E[i+16>>>2>>>0]=n.getUTCMonth(),E[i+20>>>2>>>0]=n.getUTCFullYear()-1900,E[i+24>>>2>>>0]=n.getUTCDay(),E[i+28>>>2>>>0]=(n.getTime()-Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(n,s,i){n=s+2097152>>>0<4194305-!!n?(n>>>0)+4294967296*s:NaN,i>>>=0,n=new Date(1e3*n),E[i>>>2>>>0]=n.getSeconds(),E[i+4>>>2>>>0]=n.getMinutes(),E[i+8>>>2>>>0]=n.getHours(),E[i+12>>>2>>>0]=n.getDate(),E[i+16>>>2>>>0]=n.getMonth(),E[i+20>>>2>>>0]=n.getFullYear()-1900,E[i+24>>>2>>>0]=n.getDay(),E[i+28>>>2>>>0]=(ne(n.getFullYear())?mt:ht)[n.getMonth()]+n.getDate()-1|0,E[i+36>>>2>>>0]=-(60*n.getTimezoneOffset()),s=new Date(n.getFullYear(),6,1).getTimezoneOffset();var m=new Date(n.getFullYear(),0,1).getTimezoneOffset();E[i+32>>>2>>>0]=(s!=m&&n.getTimezoneOffset()==Math.min(m,s))|0},p:function(n){n>>>=0;var s=new Date(E[n+20>>>2>>>0]+1900,E[n+16>>>2>>>0],E[n+12>>>2>>>0],E[n+8>>>2>>>0],E[n+4>>>2>>>0],E[n>>>2>>>0],0),i=E[n+32>>>2>>>0],m=s.getTimezoneOffset(),g=new Date(s.getFullYear(),6,1).getTimezoneOffset(),T=new Date(s.getFullYear(),0,1).getTimezoneOffset(),x=Math.min(T,g);return 0>i?E[n+32>>>2>>>0]=+(g!=T&&x==m):0<i!=(x==m)&&(g=Math.max(T,g),s.setTime(s.getTime()+6e4*((0<i?x:g)-m))),E[n+24>>>2>>>0]=s.getDay(),E[n+28>>>2>>>0]=(ne(s.getFullYear())?mt:ht)[s.getMonth()]+s.getDate()-1|0,E[n>>>2>>>0]=s.getSeconds(),E[n+4>>>2>>>0]=s.getMinutes(),E[n+8>>>2>>>0]=s.getHours(),E[n+12>>>2>>>0]=s.getDate(),E[n+16>>>2>>>0]=s.getMonth(),E[n+20>>>2>>>0]=s.getYear(),n=s.getTime(),isNaN(n)?(E[Ot()>>>2>>>0]=61,n=-1):n/=1e3,vt((ee=n,1<=+Math.abs(ee)?0<ee?+Math.floor(ee/4294967296)>>>0:~~+Math.ceil((ee-+(~~ee>>>0))/4294967296)>>>0:0)),n>>>0},l:function(){return-52},m:function(){},t:function(n,s,i){function m(K){return(K=K.toTimeString().match(/\(([A-Za-z ]+)\)$/))?K[1]:"GMT"}i>>>=0;var g=new Date().getFullYear(),T=new Date(g,0,1),x=new Date(g,6,1);g=T.getTimezoneOffset();var j=x.getTimezoneOffset();N[n>>>0>>>2>>>0]=60*Math.max(g,j),E[s>>>0>>>2>>>0]=+(g!=j),n=m(T),s=m(x),n=yt(n),s=yt(s),j<g?(N[i>>>2>>>0]=n,N[i+4>>>2>>>0]=s):(N[i>>>2>>>0]=s,N[i+4>>>2>>>0]=n)},d:()=>{P("")},B:function(n,s,i){n>>>=0,s>>>=0,i>>>=0,Ve.length=0;for(var m;m=k[s++>>>0];){var g=m!=105;g&=m!=112,i+=g&&i%8?4:0,Ve.push(m==112?N[i>>>2>>>0]:m==105?E[i>>>2>>>0]:he[i>>>3>>>0]),i+=g?8:4}return Ce[n].apply(null,Ve)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(n,s,i){return s>>>=0,k.copyWithin(n>>>0>>>0,s>>>0,s+(i>>>0)>>>0)},s:function(n){n>>>=0;var s=k.length;if(4294901760<n)return!1;for(var i=1;4>=i;i*=2){var m=s*(1+.2/i);m=Math.min(m,n+100663296);var g=Math;m=Math.max(n,m);e:{g=(g.min.call(g,4294901760,m+(65536-m%65536)%65536)-I.buffer.byteLength+65535)/65536;try{I.grow(g),Te();var T=1;break e}catch{}T=void 0}if(T)return!0}return!1},C:function(n,s){n>>>=0,s>>>=0;var i=0;return wt().forEach((m,g)=>{var T=s+i;for(g=N[n+4*g>>>2>>>0]=T,T=0;T<m.length;++T)W[g++>>>0>>>0]=m.charCodeAt(T);W[g>>>0>>>0]=0,i+=m.length+1}),0},D:function(n,s){n>>>=0,s>>>=0;var i=wt();N[n>>>2>>>0]=i.length;var m=0;return i.forEach(g=>m+=g.length+1),N[s>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(n,s,i,m){s>>>=0,i>>>=0,m>>>=0;for(var g=0,T=0;T<i;T++){var x=N[s>>>2>>>0],j=N[s+4>>>2>>>0];s+=8;for(var K=0;K<j;K++){var q=k[x+K>>>0],V=jr[n];q===0||q===10?((n===1?A:_)($(V,0)),V.length=0):V.push(q)}g+=j}return N[m>>>2>>>0]=g,0},r:Et,c:function(n,s,i,m){return Et(n>>>0,s>>>0,i>>>0,m>>>0)}},S=function(){function n(i){return S=i.exports,S=Vr(),I=S.K,Te(),ve.unshift(S.L),ae--,ae==0&&(ye!==null&&(clearInterval(ye),ye=null),Z&&(i=Z,Z=null,i())),S}var s={a:qr};if(ae++,r.instantiateWasm)try{return r.instantiateWasm(s,n)}catch(i){_(`Module.instantiateWasm callback failed with error: ${i}`),o(i)}return we(s,function(i){n(i.instance)}).catch(o),{}}();r._OrtInit=(n,s)=>(r._OrtInit=S.M)(n,s),r._OrtGetLastError=(n,s)=>(r._OrtGetLastError=S.N)(n,s),r._OrtCreateSessionOptions=(n,s,i,m,g,T,x,j,K,q)=>(r._OrtCreateSessionOptions=S.O)(n,s,i,m,g,T,x,j,K,q),r._OrtAppendExecutionProvider=(n,s)=>(r._OrtAppendExecutionProvider=S.P)(n,s),r._OrtAddFreeDimensionOverride=(n,s,i)=>(r._OrtAddFreeDimensionOverride=S.Q)(n,s,i),r._OrtAddSessionConfigEntry=(n,s,i)=>(r._OrtAddSessionConfigEntry=S.R)(n,s,i),r._OrtReleaseSessionOptions=n=>(r._OrtReleaseSessionOptions=S.S)(n),r._OrtCreateSession=(n,s,i)=>(r._OrtCreateSession=S.T)(n,s,i),r._OrtReleaseSession=n=>(r._OrtReleaseSession=S.U)(n),r._OrtGetInputOutputCount=(n,s,i)=>(r._OrtGetInputOutputCount=S.V)(n,s,i),r._OrtGetInputName=(n,s)=>(r._OrtGetInputName=S.W)(n,s),r._OrtGetOutputName=(n,s)=>(r._OrtGetOutputName=S.X)(n,s),r._OrtFree=n=>(r._OrtFree=S.Y)(n),r._OrtCreateTensor=(n,s,i,m,g,T)=>(r._OrtCreateTensor=S.Z)(n,s,i,m,g,T),r._OrtGetTensorData=(n,s,i,m,g)=>(r._OrtGetTensorData=S._)(n,s,i,m,g),r._OrtReleaseTensor=n=>(r._OrtReleaseTensor=S.$)(n),r._OrtCreateRunOptions=(n,s,i,m)=>(r._OrtCreateRunOptions=S.aa)(n,s,i,m),r._OrtAddRunConfigEntry=(n,s,i)=>(r._OrtAddRunConfigEntry=S.ba)(n,s,i),r._OrtReleaseRunOptions=n=>(r._OrtReleaseRunOptions=S.ca)(n),r._OrtCreateBinding=n=>(r._OrtCreateBinding=S.da)(n),r._OrtBindInput=(n,s,i)=>(r._OrtBindInput=S.ea)(n,s,i),r._OrtBindOutput=(n,s,i,m)=>(r._OrtBindOutput=S.fa)(n,s,i,m),r._OrtClearBoundOutputs=n=>(r._OrtClearBoundOutputs=S.ga)(n),r._OrtReleaseBinding=n=>(r._OrtReleaseBinding=S.ha)(n),r._OrtRunWithBinding=(n,s,i,m,g)=>(r._OrtRunWithBinding=S.ia)(n,s,i,m,g),r._OrtRun=(n,s,i,m,g,T,x,j)=>(r._OrtRun=S.ja)(n,s,i,m,g,T,x,j),r._OrtEndProfiling=n=>(r._OrtEndProfiling=S.ka)(n);var Ot=()=>(Ot=S.la)(),Tt=r._malloc=n=>(Tt=r._malloc=S.ma)(n);r._free=n=>(r._free=S.na)(n);var vt=n=>(vt=S.pa)(n),St=()=>(St=S.qa)(),At=n=>(At=S.ra)(n),xt=n=>(xt=S.sa)(n);function Vr(){var n=S;n=Object.assign({},n);var s=m=>()=>m()>>>0,i=m=>g=>m(g)>>>0;return n.la=s(n.la),n.ma=i(n.ma),n.qa=s(n.qa),n.sa=i(n.sa),n}r.stackAlloc=xt,r.stackSave=St,r.stackRestore=At,r.UTF8ToString=G,r.stringToUTF8=(n,s,i)=>ge(n,k,s,i),r.lengthBytesUTF8=le;var _e;Z=function n(){_e||It(),_e||(Z=n)};function It(){if(!(0<ae)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;){var n=r.preRun.shift();X.unshift(n)}for(;0<X.length;)X.shift()(r);if(!(0<ae||_e||(_e=!0,r.calledRun=!0,B))){for(;0<ve.length;)ve.shift()(r);for(a(r);0<Pe.length;)Pe.shift()(r)}}}return It(),e.ready}})();typeof cr=="object"&&typeof nt=="object"?nt.exports=lr:typeof define=="function"&&define.amd&&define([],()=>lr)});var at,on,ot,st,Ge,pr,sn,an,un,mr,F,Ee=C(()=>{"use strict";at=dr();on=at,st=!1,Ge=!1,pr=!1,sn=t=>{if(t===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+t+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+t+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},an=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},un=(t,e)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":e?"ort-wasm-threaded.wasm":"ort-wasm.wasm",mr=async t=>{if(st)return Promise.resolve();if(Ge)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(pr)throw new Error("previous call to 'initializeWebAssembly()' failed.");Ge=!0;let e=t.initTimeout,r=t.numThreads,a=t.simd,o=sn(r),l=a&&an(),u=t.wasmPaths,f=typeof u=="string"?u:void 0,p=un(l,o),d=typeof u=="object"?u[p]:void 0,y=!1,w=[];if(e>0&&w.push(new Promise(h=>{setTimeout(()=>{y=!0,h()},e)})),w.push(new Promise((h,b)=>{(o?on:at)({locateFile:(A,_)=>A.endsWith(".wasm")?d||(f??_)+p:_+A}).then(A=>{Ge=!1,st=!0,ot=A,h()},A=>{Ge=!1,pr=!0,b(A)})})),await Promise.race(w),y)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},F=()=>{if(st&&ot)return ot;throw new Error("WebAssembly is not initialized yet.")}});var R,Ie,L,He=C(()=>{"use strict";Ee();R=(t,e)=>{let r=F(),a=r.lengthBytesUTF8(t)+1,o=r._malloc(a);return r.stringToUTF8(t,o,a),e.push(o),o},Ie=(t,e,r,a)=>{if(typeof t=="object"&&t!==null){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach(([o,l])=>{let u=e?e+o:o;if(typeof l=="object")Ie(l,u+".",r,a);else if(typeof l=="string"||typeof l=="number")a(u,l.toString());else if(typeof l=="boolean")a(u,l?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof l}`)})},L=t=>{let e=F(),r=e.stackSave();try{let a=e.stackAlloc(8);e._OrtGetLastError(a,a+4);let o=e.HEAP32[a/4],l=e.HEAPU32[a/4+1],u=l?e.UTF8ToString(l):"";throw new Error(`${t} ERROR_CODE: ${o}, ERROR_MESSAGE: ${u}`)}finally{e.stackRestore(r)}}});var hr,yr=C(()=>{"use strict";Ee();He();hr=t=>{let e=F(),r=0,a=[],o=t||{};try{if(t?.logSeverityLevel===void 0)o.logSeverityLevel=2;else if(typeof t.logSeverityLevel!="number"||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(t?.logVerbosityLevel===void 0)o.logVerbosityLevel=0;else if(typeof t.logVerbosityLevel!="number"||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);t?.terminate===void 0&&(o.terminate=!1);let l=0;return t?.tag!==void 0&&(l=R(t.tag,a)),r=e._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,l),r===0&&L("Can't create run options."),t?.extra!==void 0&&Ie(t.extra,"",new WeakSet,(u,f)=>{let p=R(u,a),d=R(f,a);e._OrtAddRunConfigEntry(r,p,d)!==0&&L(`Can't set a run config entry: ${u} - ${f}.`)}),[r,a]}catch(l){throw r!==0&&e._OrtReleaseRunOptions(r),a.forEach(u=>e._free(u)),l}}});var fn,ln,cn,dn,wr,gr=C(()=>{"use strict";Ee();He();fn=t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}},ln=t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}},cn=t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});let e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1"),t.executionProviders&&t.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(t.enableMemPattern=!1)},dn=(t,e,r)=>{for(let a of e){let o=typeof a=="string"?a:a.name;switch(o){case"webnn":if(o="WEBNN",typeof a!="string"){let u=a;if(u?.deviceType){let f=R("deviceType",r),p=R(u.deviceType,r);F()._OrtAddSessionConfigEntry(t,f,p)!==0&&L(`Can't set a session config entry: 'deviceType' - ${u.deviceType}.`)}if(u?.numThreads){let f=u.numThreads;(typeof f!="number"||!Number.isInteger(f)||f<0)&&(f=0);let p=R("numThreads",r),d=R(f.toString(),r);F()._OrtAddSessionConfigEntry(t,p,d)!==0&&L(`Can't set a session config entry: 'numThreads' - ${u.numThreads}.`)}if(u?.powerPreference){let f=R("powerPreference",r),p=R(u.powerPreference,r);F()._OrtAddSessionConfigEntry(t,f,p)!==0&&L(`Can't set a session config entry: 'powerPreference' - ${u.powerPreference}.`)}}break;case"webgpu":if(o="JS",typeof a!="string"){let u=a;if(u?.preferredLayout){if(u.preferredLayout!=="NCHW"&&u.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${u.preferredLayout}`);let f=R("preferredLayout",r),p=R(u.preferredLayout,r);F()._OrtAddSessionConfigEntry(t,f,p)!==0&&L(`Can't set a session config entry: 'preferredLayout' - ${u.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${o}`)}let l=R(o,r);F()._OrtAppendExecutionProvider(t,l)!==0&&L(`Can't append execution provider: ${o}.`)}},wr=t=>{let e=F(),r=0,a=[],o=t||{};cn(o);try{let l=fn(o.graphOptimizationLevel??"all"),u=ln(o.executionMode??"sequential"),f=typeof o.logId=="string"?R(o.logId,a):0,p=o.logSeverityLevel??2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);let d=o.logVerbosityLevel??0;if(!Number.isInteger(d)||d<0||d>4)throw new Error(`log verbosity level is not valid: ${d}`);let y=typeof o.optimizedModelFilePath=="string"?R(o.optimizedModelFilePath,a):0;if(r=e._OrtCreateSessionOptions(l,!!o.enableCpuMemArena,!!o.enableMemPattern,u,!!o.enableProfiling,0,f,p,d,y),r===0&&L("Can't create session options."),o.executionProviders&&dn(r,o.executionProviders,a),o.enableGraphCapture!==void 0){if(typeof o.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${o.enableGraphCapture}`);let w=R("enableGraphCapture",a),h=R(o.enableGraphCapture.toString(),a);e._OrtAddSessionConfigEntry(r,w,h)!==0&&L(`Can't set a session config entry: 'enableGraphCapture' - ${o.enableGraphCapture}.`)}if(o.freeDimensionOverrides)for(let[w,h]of Object.entries(o.freeDimensionOverrides)){if(typeof w!="string")throw new Error(`free dimension override name must be a string: ${w}`);if(typeof h!="number"||!Number.isInteger(h)||h<0)throw new Error(`free dimension override value must be a non-negative integer: ${h}`);let b=R(w,a);e._OrtAddFreeDimensionOverride(r,b,h)!==0&&L(`Can't set a free dimension override: ${w} - ${h}.`)}return o.extra!==void 0&&Ie(o.extra,"",new WeakSet,(w,h)=>{let b=R(w,a),O=R(h,a);e._OrtAddSessionConfigEntry(r,b,O)!==0&&L(`Can't set a session config entry: ${w} - ${h}.`)}),[r,a]}catch(l){throw r!==0&&e._OrtReleaseSessionOptions(r),a.forEach(u=>e._free(u)),l}}});var it,br,ut,Er,Or,$e,Tr,ft=C(()=>{"use strict";it=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},br=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},ut=t=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][t],Er=t=>{switch(t){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}},Or=t=>{switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${t}`)}},$e=t=>t==="float32"||t==="int32"||t==="int64"||t==="bool"||t==="float16"||t==="uint32",Tr=t=>{switch(t){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${t}`)}}});var Be,lt=C(()=>{"use strict";Be=async t=>{if(typeof t=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(t))}catch(e){if(e.code==="ERR_FS_FILE_TOO_LARGE"){let r=(void 0)(t),a=[];for await(let o of r)a.push(o);return new Uint8Array(Buffer.concat(a))}throw e}else{let e=await fetch(t);if(!e.ok)throw new Error(`failed to load external data file: ${t}`);let r=e.headers.get("Content-Length"),a=r?parseInt(r,10):0;if(a<1073741824)return new Uint8Array(await e.arrayBuffer());{if(!e.body)throw new Error(`failed to load external data file: ${t}, no response body.`);let o=e.body.getReader(),l;try{l=new ArrayBuffer(a)}catch(f){if(f instanceof RangeError){let p=Math.ceil(a/65536);l=new WebAssembly.Memory({initial:p,maximum:p}).buffer}else throw f}let u=0;for(;;){let{done:f,value:p}=await o.read();if(f)break;let d=p.byteLength;new Uint8Array(l,u,d).set(p),u+=d}return new Uint8Array(l,0,a)}}else return t instanceof Blob?new Uint8Array(await t.arrayBuffer()):t instanceof Uint8Array?t:new Uint8Array(t)}});var pn,Sr,Ar,Oe,mn,ct,xr,Ir,vr,Br,Pr,Cr=C(()=>{"use strict";yr();gr();ft();Ee();He();lt();pn=(t,e)=>{F()._OrtInit(t,e)!==0&&L("Can't initialize onnxruntime.")},Sr=async t=>{pn(t.wasm.numThreads,Or(t.logLevel))},Ar=async(t,e)=>{},Oe=new Map,mn=t=>{let e=F(),r=e.stackSave();try{let a=e.stackAlloc(8);return e._OrtGetInputOutputCount(t,a,a+4)!==0&&L("Can't get session input/output count."),[e.HEAP32[a/4],e.HEAP32[a/4+1]]}finally{e.stackRestore(r)}},ct=t=>{let e=F(),r=e._malloc(t.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${t.byteLength}.`);return e.HEAPU8.set(t,r),[r,t.byteLength]},xr=async(t,e)=>{let r,a,o=F();Array.isArray(t)?[r,a]=t:t.buffer===o.HEAPU8.buffer?[r,a]=[t.byteOffset,t.byteLength]:[r,a]=ct(t);let l=0,u=0,f=0,p=[],d=[],y=[];try{if([u,p]=wr(e),e?.externalData&&o.mountExternalData){let I=[];for(let B of e.externalData){let W=typeof B=="string"?B:B.path;I.push(Be(typeof B=="string"?B:B.data).then(k=>{o.mountExternalData(W,k)}))}await Promise.all(I)}l=await o._OrtCreateSession(r,a,u),l===0&&L("Can't create a session.");let[w,h]=mn(l),b=!!e?.enableGraphCapture,O=[],v=[],A=[];for(let I=0;I<w;I++){let B=o._OrtGetInputName(l,I);B===0&&L("Can't get an input name."),d.push(B),O.push(o.UTF8ToString(B))}for(let I=0;I<h;I++){let B=o._OrtGetOutputName(l,I);B===0&&L("Can't get an output name."),y.push(B);let W=o.UTF8ToString(B);v.push(W)}let _=null;return Oe.set(l,[l,d,y,_,b,!1]),[l,O,v]}catch(w){throw d.forEach(h=>o._OrtFree(h)),y.forEach(h=>o._OrtFree(h)),f!==0&&o._OrtReleaseBinding(f),l!==0&&o._OrtReleaseSession(l),w}finally{o._free(r),u!==0&&o._OrtReleaseSessionOptions(u),p.forEach(w=>o._free(w)),o.unmountExternalData?.()}},Ir=t=>{let e=F(),r=Oe.get(t);if(!r)throw new Error(`cannot release session. invalid session id: ${t}`);let[a,o,l,u,f]=r;u&&(f&&e._OrtClearBoundOutputs(u.handle),e._OrtReleaseBinding(u.handle)),e.jsepOnReleaseSession?.(t),o.forEach(p=>e._OrtFree(p)),l.forEach(p=>e._OrtFree(p)),e._OrtReleaseSession(a),Oe.delete(t)},vr=(t,e,r,a,o,l=!1)=>{if(!t){e.push(0);return}let u=F(),f=t[0],p=t[1],d=t[3],y,w;if(f==="string"&&d==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(l&&d!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${o} when enableGraphCapture is true.`);if(d==="gpu-buffer"){let O=t[2].gpuBuffer,v=ut(it(f));w=p.reduce((A,_)=>A*_,1)*v,y=u.jsepRegisterBuffer(a,o,O,w)}else{let O=t[2];if(Array.isArray(O)){w=4*O.length,y=u._malloc(w),r.push(y);let v=y/4;for(let A=0;A<O.length;A++){if(typeof O[A]!="string")throw new TypeError(`tensor data at index ${A} is not a string`);u.HEAPU32[v++]=R(O[A],r)}}else w=O.byteLength,y=u._malloc(w),r.push(y),u.HEAPU8.set(new Uint8Array(O.buffer,O.byteOffset,w),y)}let h=u.stackSave(),b=u.stackAlloc(4*p.length);try{let O=b/4;p.forEach(A=>u.HEAP32[O++]=A);let v=u._OrtCreateTensor(it(f),y,w,b,p.length,Tr(d));v===0&&L(`Can't create tensor for input/output. session=${a}, index=${o}.`),e.push(v)}finally{u.stackRestore(h)}},Br=async(t,e,r,a,o,l)=>{let u=F(),f=Oe.get(t);if(!f)throw new Error(`cannot run inference. invalid session id: ${t}`);let p=f[0],d=f[1],y=f[2],w=f[3],h=f[4],b=f[5],O=e.length,v=a.length,A=0,_=[],I=[],B=[],W=[],k=u.stackSave(),E=u.stackAlloc(O*4),N=u.stackAlloc(O*4),he=u.stackAlloc(v*4),Te=u.stackAlloc(v*4);try{[A,_]=hr(l);for(let P=0;P<O;P++)vr(r[P],I,W,t,e[P],h);for(let P=0;P<v;P++)vr(o[P],B,W,t,O+a[P],h);let X=E/4,ve=N/4,Pe=he/4,ae=Te/4;for(let P=0;P<O;P++)u.HEAPU32[X++]=I[P],u.HEAPU32[ve++]=d[e[P]];for(let P=0;P<v;P++)u.HEAPU32[Pe++]=B[P],u.HEAPU32[ae++]=y[a[P]];u.jsepOnRunStart?.(p);let ye;ye=await u._OrtRun(p,N,E,O,Te,v,he,A),ye!==0&&L("failed to call OrtRun().");let Z=[];for(let P=0;P<v;P++){let te=u.HEAPU32[he/4+P];if(te===B[P]){Z.push(o[P]);continue}let ie=u.stackSave(),J=u.stackAlloc(4*4),ue=!1,z,Q=0;try{u._OrtGetTensorData(te,J,J+4,J+8,J+12)!==0&&L(`Can't access output tensor data on index ${P}.`);let we=J/4,ee=u.HEAPU32[we++];Q=u.HEAPU32[we++];let Ce=u.HEAPU32[we++],qe=u.HEAPU32[we++],re=[];for(let $=0;$<qe;$++)re.push(u.HEAPU32[Ce/4+$]);u._OrtFree(Ce);let fe=re.reduce(($,G)=>$*G,1);z=br(ee);let Se=w?.outputPreferredLocations[a[P]];if(z==="string"){if(Se==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let $=[],G=Q/4;for(let le=0;le<fe;le++){let ge=u.HEAPU32[G++],ne=le===fe-1?void 0:u.HEAPU32[G]-ge;$.push(u.UTF8ToString(ge,ne))}Z.push([z,re,$,"cpu"])}else if(Se==="gpu-buffer"&&fe>0){let $=u.jsepGetBuffer(Q),G=ut(ee);if(G===void 0||!$e(z))throw new Error(`Unsupported data type: ${z}`);ue=!0,Z.push([z,re,{gpuBuffer:$,download:u.jsepCreateDownloader($,fe*G,z),dispose:()=>{u._OrtReleaseTensor(te)}},"gpu-buffer"])}else{let $=Er(z),G=new $(fe);new Uint8Array(G.buffer,G.byteOffset,G.byteLength).set(u.HEAPU8.subarray(Q,Q+G.byteLength)),Z.push([z,re,G,"cpu"])}}finally{u.stackRestore(ie),z==="string"&&Q&&u._free(Q),ue||u._OrtReleaseTensor(te)}}return w&&!h&&(u._OrtClearBoundOutputs(w.handle),Oe.set(t,[p,d,y,w,h,!1])),Z}finally{u.stackRestore(k),I.forEach(X=>u._OrtReleaseTensor(X)),B.forEach(X=>u._OrtReleaseTensor(X)),W.forEach(X=>u._free(X)),A!==0&&u._OrtReleaseRunOptions(A),_.forEach(X=>u._free(X))}},Pr=t=>{let e=F(),r=Oe.get(t);if(!r)throw new Error("invalid session id");let a=r[0],o=e._OrtEndProfiling(a);o===0&&L("Can't get an profile file name."),e._OrtFree(o)}});var dt,_r,Dr,Uo,Ur,Rr,Lr,Mr,Fr,kr,Nr,pt=C(()=>{"use strict";me();Cr();Ee();dt=!1,_r=!1,Dr=!1,Uo=typeof document<"u"?document?.currentScript?.src:void 0,Ur=async()=>{if(!_r){if(dt)throw new Error("multiple calls to 'initWasm()' detected.");if(Dr)throw new Error("previous call to 'initWasm()' failed.");dt=!0;try{await mr(U.wasm),await Sr(U),_r=!0}catch(t){throw Dr=!0,t}finally{dt=!1}}},Rr=async t=>{await Ar(U,t)},Lr=async t=>ct(t),Mr=async(t,e)=>xr(t,e),Fr=async t=>{Ir(t)},kr=async(t,e,r,a,o,l)=>Br(t,e,r,a,o,l),Nr=async t=>{Pr(t)}});var Wr,yn,ze,Gr=C(()=>{"use strict";me();pt();ft();lt();Wr=(t,e)=>{switch(t.location){case"cpu":return[t.type,t.dims,t.data,"cpu"];case"gpu-buffer":return[t.type,t.dims,{gpuBuffer:t.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${t.location} for ${e()}`)}},yn=t=>{switch(t[3]){case"cpu":return new H(t[0],t[2],t[1]);case"gpu-buffer":{let e=t[0];if(!$e(e))throw new Error(`not supported data type: ${e} for deserializing GPU tensor`);let{gpuBuffer:r,download:a,dispose:o}=t[2];return H.fromGpuBuffer(r,{dataType:e,dims:t[1],download:a,dispose:o})}default:throw new Error(`invalid data location: ${t[3]}`)}},ze=class{async fetchModelAndCopyToWasmMemory(e){return Lr(await Be(e))}async loadModel(e,r){oe();let a;typeof e=="string"?typeof process<"u"&&process.versions&&process.versions.node?a=await Be(e):a=await this.fetchModelAndCopyToWasmMemory(e):a=e,[this.sessionId,this.inputNames,this.outputNames]=await Mr(a,r),se()}async dispose(){return Fr(this.sessionId)}async run(e,r,a){oe();let o=[],l=[];Object.entries(e).forEach(h=>{let b=h[0],O=h[1],v=this.inputNames.indexOf(b);if(v===-1)throw new Error(`invalid input '${b}'`);o.push(O),l.push(v)});let u=[],f=[];Object.entries(r).forEach(h=>{let b=h[0],O=h[1],v=this.outputNames.indexOf(b);if(v===-1)throw new Error(`invalid output '${b}'`);u.push(O),f.push(v)});let p=o.map((h,b)=>Wr(h,()=>`input "${this.inputNames[l[b]]}"`)),d=u.map((h,b)=>h?Wr(h,()=>`output "${this.outputNames[f[b]]}"`):null),y=await kr(this.sessionId,l,p,f,d,a),w={};for(let h=0;h<y.length;h++)w[this.outputNames[f[h]]]=u[h]??yn(y[h]);return se(),w}startProfiling(){}endProfiling(){Nr(this.sessionId)}}});var wn,je,Hr=C(()=>{"use strict";me();pt();Gr();wn=()=>{if((typeof U.wasm.initTimeout!="number"||U.wasm.initTimeout<0)&&(U.wasm.initTimeout=0),typeof U.wasm.simd!="boolean"&&(U.wasm.simd=!0),typeof U.wasm.proxy!="boolean"&&(U.wasm.proxy=!1),typeof U.wasm.trace!="boolean"&&(U.wasm.trace=!1),typeof U.wasm.numThreads!="number"||!Number.isInteger(U.wasm.numThreads)||U.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(U.wasm.numThreads=1);let t=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;U.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},je=class{async init(e){wn(),await Ur(),await Rr(e)}async createInferenceSessionHandler(e,r){let a=new ze;return await a.loadModel(e,r),Promise.resolve(a)}}});var $r={};Ae($r,{wasmBackend:()=>gn});var gn,zr=C(()=>{"use strict";Hr();gn=new je});var En={};Ae(En,{InferenceSession:()=>Zt,TRACE:()=>et,TRACE_FUNC_BEGIN:()=>oe,TRACE_FUNC_END:()=>se,Tensor:()=>H,TrainingSession:()=>rr,default:()=>bn,env:()=>U,registerBackend:()=>be});module.exports=De(En);me();me();me();var or="1.18.0";var bn=rt;{let t=(zr(),De($r)).wasmBackend;be("cpu",t,10),be("wasm",t,10)}Object.defineProperty(U.versions,"web",{value:or,enumerable:!0});
//# sourceMappingURL=ort.wasm-core.min.js.map
